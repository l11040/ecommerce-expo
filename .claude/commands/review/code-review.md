# 코드 리뷰 스킬

변경된 코드를 분석하여 품질, 보안, 성능 관점에서 리뷰하고 개선점을 제안합니다.

## 실행 지침

### 1단계: 변경된 코드 확인

```bash
# 분기 지점 찾기 (이 브랜치에서 커밋한 것만)
MERGE_BASE=$(git merge-base dev HEAD)

# 변경된 파일 목록
git diff $MERGE_BASE..HEAD --name-only --diff-filter=ACMR

# 전체 변경 내용
git diff $MERGE_BASE..HEAD
```

### 2단계: 코드 분석 관점

다음 관점에서 코드를 분석하세요:

#### 🔒 보안 (Security)
- 하드코딩된 비밀키/API 키
- XSS 취약점 (dangerouslySetInnerHTML 등)
- 사용자 입력 검증 누락
- 민감한 정보 노출

#### ⚡ 성능 (Performance)
- 불필요한 리렌더링 (useMemo, useCallback 누락)
- 무거운 연산의 메모이제이션 부재
- 큰 번들 사이즈 영향
- 비효율적인 데이터 페칭

#### 🏗️ 코드 품질 (Code Quality)
- 컴포넌트 크기 및 책임 분리
- 중복 코드
- 네이밍 일관성
- 타입 안정성 (any 사용, 타입 단언 등)

#### 📐 아키텍처 (Architecture)
- 디렉토리 구조 일관성
- 관심사 분리
- 의존성 방향
- 재사용성

#### 🎯 React 베스트 프랙티스
- Hooks 규칙 준수
- key prop 사용
- 이벤트 핸들러 네이밍
- 조건부 렌더링 패턴

### 3단계: 리뷰 보고서 작성

```markdown
## 코드 리뷰 결과

### 📊 전체 평가

| 항목 | 점수 | 상태 |
|------|------|------|
| 보안 | 8/10 | 🟢 양호 |
| 성능 | 6/10 | 🟡 개선 필요 |
| 코드 품질 | 7/10 | 🟢 양호 |
| 아키텍처 | 8/10 | 🟢 양호 |

### 🚨 중요 이슈 (반드시 수정)

#### 1. [이슈 제목]

- **파일**: `src/xxx.tsx:15`
- **심각도**: 🔴 높음
- **카테고리**: 보안

**문제 코드**:
```tsx
// 현재 코드
const data = eval(userInput);
```

**수정 제안**:
```tsx
// 개선된 코드
const data = JSON.parse(userInput);
```

**이유**: eval은 보안 취약점을 유발합니다.

---

### ⚠️ 개선 권장 사항

#### 1. [항목 제목]

- **파일**: `src/xxx.tsx:42`
- **심각도**: 🟡 중간
- **카테고리**: 성능

**현재 코드**:
```tsx
const filteredItems = items.filter(item => item.active);
```

**개선 제안**:
```tsx
const filteredItems = useMemo(
  () => items.filter(item => item.active),
  [items]
);
```

**이유**: 매 렌더링마다 필터링이 재실행됩니다.

---

### 💡 선택적 개선 사항

- [간단한 개선 제안들]
- [코드 스타일 제안]
- [가독성 개선 제안]

### ✅ 잘된 점

- [칭찬할 만한 코드 패턴]
- [좋은 구조적 결정]
- [적절한 에러 처리]

### 📌 요약

- 중요 이슈: N개
- 개선 권장: N개
- 선택적 개선: N개
```

### 출력 규칙

1. **한글로 작성**
2. 심각도별로 정렬 (높음 → 중간 → 낮음)
3. 문제 코드와 개선 코드를 함께 제시
4. 수정 이유를 명확히 설명
5. 긍정적인 부분도 언급 (잘된 점)
6. 코드 블록에는 파일 경로와 라인 번호 포함

### 심각도 기준

| 심각도 | 설명 |
|--------|------|
| 🔴 높음 | 보안 취약점, 런타임 에러, 데이터 손실 가능성 |
| 🟡 중간 | 성능 이슈, 유지보수 어려움, 잠재적 버그 |
| 🟢 낮음 | 코드 스타일, 가독성, 선택적 개선 |
